<html>
	<head>
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Rubik+Mono+One&display=swap" rel="stylesheet">
		<style type="text/css">
			* {
				box-sizing: border-box;
			}

			body {
				color: white;
				font-size: 20px;
				overflow: hidden;
				background-color: white;
				background-image: url(wallpapers/setup.png);
				user-select: none;
			}
		</style>
		<link
			rel="stylesheet"
			href="https://unpkg.com/98.css"
		>
		<script type="importmap">
			{
				"imports": {
					"preact": "../node_modules/preact/dist/preact.module.js",
					"preact-hooks": "../node_modules/preact/hooks/dist/hooks.module.js",
					"clsx": "../node_modules/clsx/dist/clsx.mjs",
					"createStylesheet": "../src/modules/createStylesheet.js",
					"clsx": "../node_modules/clsx/dist/clsx.mjs"
			 	}
			}
		</script>
		<script type="module">
			import { render, h, Component } from 'preact';
			import MainScreen from './screens/MainScreen.js';

			class AppContext extends Component {
				getChildContext() {
					return {
						// headerFont,
					}
				};

				render() {
					return this.props.children;
				}
			}

			function App({
				colorPalette,
				sprites,
			}) {
				const {
					colorsCount,
					saturationPercent,
					lightnessPercent,
					lightnessOffsetPercent,
				} = colorPalette;

				return h(AppContext, null,
					h(MainScreen, {
						colorsCount,
						saturationPercent,
						lightnessPercent,
						lightnessOffsetPercent,
						sprites,
					}),
				);
			}

			document.addEventListener('DOMContentLoaded', async (event) => {
				const mainElement = document.getElementById('main');

				const response = await fetch('../src/resources.json');
				const resources = await response.json();
				const { colorPalette, sprites } = resources;

				console.log('>>', resources);

				render(h(App, {
					colorPalette,
					sprites,
				}), mainElement);
			});
		</script>
	</head>
	<body>
		<div id="main"></div>
		<!--div
			id="splashscreen"
			style="
				position: fixed;
				inset: 0;
				display: flex;
				justify-content: center;
				align-items: center;
				flex-direction: column;
			"
		>
			<div style="font-size: 3rem">
				LONESHIP
			</div>
			<div class="continue" style="opacity: 0;">
				press eny key to continue
			</div>
		</div-->
	</body>
</html>
